{% extends "base.html" %}
{% block title %}CA Application Successful{% endblock %}


{% block head %}

{% endblock %}

{% block content %}

<section class="section">
    <div class="container">

        <!-- Success Hero -->
        <div class="notification is-success is-light has-text-centered">
            <h1 class="title is-3">üéâ Campus Ambassador Application Successful!</h1>
            <p class="subtitle is-6">Thank you for applying to become a Campus Ambassador</p>
        </div>

        <div class="columns is-centered mt-5">
            <div class="column is-10">

                <!-- Main Card -->
                <div class="card">
                    <div class="card-content">

                        <!-- Profile + CA Code -->
                        <div class="columns is-vcentered">
                            <div class="column is-4 has-text-centered">
                                <figure class="image is-128x128 is-inline-block">
                                    <img class="is-rounded"
                                        src="/static/uploads/ca_profiles/{{ ca_registration.profile_picture }}"
                                        alt="Profile Picture">
                                </figure>
                                <p class="has-text-weight-semibold mt-2">{{ ca_registration.full_name }}</p>
                                <span class="tag mt-1
                                    {% if ca_registration.status == 'approved' %} is-success is-light
                                    {% elif ca_registration.status == 'pending' %} is-warning is-light
                                    {% elif ca_registration.status == 'rejected' %} is-danger is-light
                                    {% else %} is-info is-light
                                    {% endif %}">
                                        {{ ca_registration.status|title }}
                                </span>

                            </div>

                            {% if ca_registration.status == 'approved' %}
                            <div class="column is-8">
                                <div class="box has-background-primary-light has-text-centered">
                                    <p class="has-text-grey">Your Unique CA Code</p>
                                    <p class="title is-2 has-text-primary" id="caCode">
                                        {{ ca_registration.ca_code }}
                                    </p>
                                    <p class="is-size-7">Keep this code confidential. Use it when referring
                                        participants.</p>

                                    <button onclick="copyCACode()" class="button is-primary is-small mt-3">
                                        üìã Copy CA Code
                                    </button>
                                </div>
                            </div>
                            {% endif %}
                        </div>

                        <hr>

                        <!-- Application Details -->
                        <h3 class="title is-5">üìÑ Application Details</h3>

                        <div class="columns is-multiline">
                            <div class="column is-6"><strong>Email:</strong> {{ ca_registration.email }}</div>
                            <div class="column is-6"><strong>Phone:</strong> {{ ca_registration.phone }}</div>
                            <div class="column is-6"><strong>Institution:</strong> {{ ca_registration.institution }}
                            </div>
                            <div class="column is-6"><strong>Class/Year:</strong> {{ ca_registration.class }}</div>
                        </div>

                        <hr>

                        <!-- Next Steps -->
                        <h3 class="title is-5">üöÄ What‚Äôs Next?</h3>
                        <div class="content">
                            <ol>
                                <li>Your application is <strong>{{ ca_registration.status }}</strong></li>
                                <li>You will receive an email confirmation shortly</li>
                                <li>Review time: 3‚Äì5 business days</li>
                                <li>If approved, you‚Äôll receive:
                                    <ul>
                                        <li>CA Welcome Kit</li>
                                        <li>Detailed guidelines</li>
                                        <li>Access to CA portal</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>

                        <!-- Actions -->
                        <div class="buttons is-centered mt-4">
                            <a href="{{ url_for('index') }}" class="button is-link is-light">üè† Back to Home</a>
                            <a href="{{ url_for('ca_register') }}" class="button is-info is-light">‚ûï Apply for a
                                Friend</a>
                        </div>

                    </div>
                </div>

                <!-- Instructions -->
                <div class="box mt-5">
                    <h3 class="title is-5 has-text-centered">üìå How to Use Your CA Code</h3>

                    <div class="columns has-text-centered mt-4">
                        <div class="column">
                            <p class="title is-4">1Ô∏è‚É£</p>
                            <p class="has-text-weight-semibold">Share Your Code</p>
                            <p class="is-size-7">Give your CA code to participants</p>
                        </div>
                        <div class="column">
                            <p class="title is-4">2Ô∏è‚É£</p>
                            <p class="has-text-weight-semibold">Track Registrations</p>
                            <p class="is-size-7">Each signup is linked to you</p>
                        </div>
                        <div class="column">
                            <p class="title is-4">3Ô∏è‚É£</p>
                            <p class="has-text-weight-semibold">Earn Rewards</p>
                            <p class="is-size-7">Top CAs get special prizes</p>
                        </div>
                        <div class="column">
                            <p class="title is-4">4Ô∏è‚É£</p>
                            <p class="has-text-weight-semibold">Get Certificate</p>
                            <p class="is-size-7">Official recognition of your work</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

{% endblock %}


{% block scripts %}
<script>
    function copyCACode() {
        const caCode = "{{ ca_registration.ca_code }}";
        navigator.clipboard.writeText(caCode).then(() => {
            alert("CA Code copied: " + caCode);
        });
    }

    localStorage.setItem("last_ca_code", "{{ ca_registration.ca_code }}");
</script>
{% endblock %}